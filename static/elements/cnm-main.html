<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="/bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/bower_components/core-icon/core-icon.html">
<link rel="import" href="/bower_components/core-icons/iconsets/maps-icons.html">

<link rel="import" href="/elements/cnm-nearby.html">
<link rel="import" href="/elements/cnm-tracks.html">
<link rel="import" href="/elements/cnm-favorites.html">

<polymer-element name="cnm-main">
  <template>
    <style>
    core-header-panel {
      height: 100%;
      overflow: auto;
      -webkit-overflow-scrolling: touch; 
    }
    core-toolbar {
      background: #03a9f4;
      color: white;
    }
    paper-tabs {
      width: 100%;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    .container {
      margin: 100 auto;
    }
    </style>

    <core-header-panel>
      <core-toolbar>
        <paper-tabs id="tabs" valueattr="name" selected="nearby">
          <paper-tab name="nearby">
            <core-icon icon="maps:place"></core-icon>
          </paper-tab>
          <paper-tab name="tracks">
            <core-icon icon="list"></core-icon>
          </paper-tab>
          <paper-tab name="favorites">
            <core-icon icon="favorite"></core-icon>
          </paper-tab>
        </paper-tabs>
      </core-toolbar>
      <div class="container" layout vertical center>
        <cnm-nearby id="nearby" hidden?="{{selected != 'nearby'}}"></cnm-nearby>
        <cnm-tracks id="tracks" hidden?="{{selected != 'tracks'}}"></cnm-tracks>
        <cnm-favorites id="favorites" hidden?="{{selected != 'favorites'}}"></cnm-favorites>
      </div>
    </core-header-panel>

  </template>
  <script>
  Polymer("cnm-main", {
    selected: "nearby",
    ready: function() {
      console.log("cnm-main ready");
      var tabs = this.$.tabs;
      var self = this;
      tabs.addEventListener("core-select", function(e) {
        if (e.detail.isSelected) {
          console.log(tabs.selected);
          self.selected = tabs.selected;
          self.$[tabs.selected].load();
        }
      });
    }
  });
  </script>
</polymer-element>
